# AI-PAL - Privacy-First AC-AI Cognitive Partner ü§ù

> *There once was an AI quite keen*
> *The most agency-conscious you've seen*
> *It tracks every choice*
> *Gives you back your voice*
> *And keeps all your data pristine!*

AI-PAL is a production-ready cognitive partner built on the **Agency Calculus for AI (AC-AI)** framework. It combines privacy-first architecture with the **Fractal Flow Engine (FFE)** to help you achieve goals while measurably expanding your autonomy.

## üåü Core Philosophy

**üîí Privacy First**: All sensitive data processed locally. PII automatically scrubbed. You own your data.

**üìà Agency Expansion**: Every interaction is measured for agency impact. System pauses if your autonomy decreases.

**‚úÖ Ethical Governance**: Four Gates enforcement ensures the system expands human agency without causing harm.

**üéØ Flow-Optimized**: Fractal Flow Engine breaks goals into achievable atomic blocks, maintaining momentum and pride.

## üèóÔ∏è Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  User Interfaces Layer                       ‚îÇ
‚îÇ         ‚Ä¢ CLI (11 commands)  ‚Ä¢ REST API (23 endpoints)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Integrated AC-AI System                           ‚îÇ
‚îÇ  ‚Ä¢ Multi-Model Orchestrator (5 models)                      ‚îÇ
‚îÇ  ‚Ä¢ Privacy Manager (PII scrubbing, differential privacy)    ‚îÇ
‚îÇ  ‚Ä¢ Enhanced Context Manager (semantic search, 4K tokens)    ‚îÇ
‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚îÇ               ‚îÇ               ‚îÇ               ‚îÇ
‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Gate       ‚îÇ ‚îÇ Monitoring  ‚îÇ ‚îÇ FFE         ‚îÇ ‚îÇ Priority 3  ‚îÇ
‚îÇ System     ‚îÇ ‚îÇ Systems     ‚îÇ ‚îÇ Engine      ‚îÇ ‚îÇ Features    ‚îÇ
‚îÇ            ‚îÇ ‚îÇ             ‚îÇ ‚îÇ             ‚îÇ ‚îÇ             ‚îÇ
‚îÇ ‚Ä¢ Gate 1   ‚îÇ ‚îÇ ‚Ä¢ ARI       ‚îÇ ‚îÇ ‚Ä¢ Goal      ‚îÇ ‚îÇ ‚Ä¢ Social    ‚îÇ
‚îÇ ‚Ä¢ Gate 2   ‚îÇ ‚îÇ   Monitor   ‚îÇ ‚îÇ   Ingestor  ‚îÇ ‚îÇ   Features  ‚îÇ
‚îÇ ‚Ä¢ Gate 3   ‚îÇ ‚îÇ ‚Ä¢ EDM       ‚îÇ ‚îÇ ‚Ä¢ Scoping   ‚îÇ ‚îÇ ‚Ä¢ Persona.  ‚îÇ
‚îÇ ‚Ä¢ Gate 4   ‚îÇ ‚îÇ   Monitor   ‚îÇ ‚îÇ   Agent     ‚îÇ ‚îÇ   Discovery ‚îÇ
‚îÇ ‚Ä¢ Tribunal ‚îÇ ‚îÇ ‚Ä¢ Self-     ‚îÇ ‚îÇ ‚Ä¢ Strength  ‚îÇ ‚îÇ ‚Ä¢ Teaching  ‚îÇ
‚îÇ ‚Ä¢ Plugins  ‚îÇ ‚îÇ   Improve   ‚îÇ ‚îÇ   Amplifier ‚îÇ ‚îÇ   Mode      ‚îÇ
‚îÇ            ‚îÇ ‚îÇ             ‚îÇ ‚îÇ ‚Ä¢ Momentum  ‚îÇ ‚îÇ             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ   Loop      ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ ‚Ä¢ Growth    ‚îÇ
                               ‚îÇ   Scaffold  ‚îÇ
                               ‚îÇ ‚Ä¢ Rewards   ‚îÇ
                               ‚îÇ ‚Ä¢ Curiosity ‚îÇ
                               ‚îÇ   Compass   ‚îÇ
                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                     ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ                                 ‚îÇ
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ  External LLM APIs ‚îÇ         ‚îÇ  Security & Audit  ‚îÇ
          ‚îÇ  ‚Ä¢ Anthropic       ‚îÇ         ‚îÇ  ‚Ä¢ Secret Scanner  ‚îÇ
          ‚îÇ  ‚Ä¢ OpenAI          ‚îÇ         ‚îÇ  ‚Ä¢ Input Sanitizer ‚îÇ
          ‚îÇ  ‚Ä¢ Local (Ollama)  ‚îÇ         ‚îÇ  ‚Ä¢ Audit Logger    ‚îÇ
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üöÄ Key Features

### ‚úÖ **Fully Implemented** (Production Ready - 98% Complete)

#### **Fractal Flow Engine (FFE)** üéØ
The heart of AI-PAL's goal achievement system:

- **Goal Ingestion**: Natural language ‚Üí structured goals with value estimation
- **80/20 Fractal Scoping**: AI-powered identification of high-impact tasks
- **Atomic Block Planning**: 5-block stop rule keeps you in flow
- **Signature Strength Amplifier**: Reframes tasks to match your unique strengths
- **Momentum Loop Orchestrator**: State machine (planning ‚Üí working ‚Üí review ‚Üí celebrate)
- **Growth Scaffold**: Automatic bottleneck detection and resolution scaffolding
- **Pride-Based Rewards**: Personalized celebration tied to identity and progress
- **Progress Tapestry**: Visual win tracking with narrative connections
- **Epic Meaning Module**: Connects daily wins to long-term aspirations

#### **Monitoring & Agency Tracking** üìä
Real-time measurement of system impact:

- **ARI Monitor** (Autonomy Retention Index): Tracks 7 agency dimensions
  - Decision quality, skill development, AI reliance, bottleneck resolution
  - Confidence, engagement, autonomy perception
  - Automatic alerts when agency floors are breached
- **EDM Monitor** (Epistemic Debt Management): Detects misinformation in real-time
  - Severity scoring, debt resolution tracking, fact-checking integration
- **Self-Improvement Loop**: User feedback collection and LoRA fine-tuning
- **Agency Dashboard**: 7-day reporting with 15+ metrics

#### **Multi-Model Orchestration** ü§ñ
Intelligent routing across 5 models:

- **Anthropic Claude** (Sonnet, Haiku): Complex reasoning, ethics, creative tasks
- **OpenAI GPT** (4, 3.5-turbo): General tasks, embeddings
- **Local Models** (Phi-2 via Ollama): Privacy-sensitive, simple tasks
- **Smart Routing**: Task complexity ‚Üí optimal model selection
- **Streaming Support**: Token-by-token responses
- **Cost Tracking**: Per-request token counting and cost calculation

#### **Privacy & Security** üîí
Enterprise-grade protection:

- **PII Scrubbing**: 15+ detection patterns (API keys, emails, SSNs, credit cards)
- **Differential Privacy**: Œµ=1.0, Œ¥=1e-5 noise injection
- **Secret Scanner**: 95-99% confidence detection with entropy-based validation
- **Input Sanitization**: SQL injection, XSS, path traversal prevention
- **Audit Logging**: 25+ event types, 90-day retention, async non-blocking
- **Local Processing Priority**: Sensitive operations never leave your device

#### **Four Gates System** ‚úÖ
Mandatory ethical checks on all significant actions:

1. **Gate 1: Net Agency Test** - Aggregate ŒîAgency ‚â• 0
2. **Gate 2: Extraction Analysis** - No dark patterns, lock-ins, coercion
3. **Gate 3: Humanity Override** - Real appeals process with authority
4. **Gate 4: Performance Parity** - No algorithmic discrimination

- **AHO Tribunal**: Multi-stakeholder voting (7 roles, 66% consensus)
- **Circuit Breakers**: Automatic shutdown on threshold violations
- **Re-appeal Process**: Up to 2 appeals with escalation

#### **Priority 3: Advanced Features** ‚≠ê

**Social Relatedness** (Privacy-First):
- User-defined groups (open and invite-only)
- Win sharing (user-initiated only, never automatic)
- Encouragement system (opt-in)
- No vanity metrics, no FOMO mechanics
- Granular privacy controls

**Advanced Personality Profiling**:
- Interactive strength discovery (8 signature strengths)
- Multi-stage assessment (initial ‚Üí refining ‚Üí validating)
- Dynamic updates from behavioral observation
- Evidence-based confidence scoring
- Automatic strength refinement

**Learn-by-Teaching Mode**:
- Prot√©g√© Pipeline (explain concepts to "student AI")
- AI-powered question generation
- Teaching quality scoring
- Explanation evaluation and feedback

**Curiosity Compass**:
- Exploration opportunity discovery
- Bottleneck ‚Üí curiosity reframing
- 15-minute exploration blocks
- Discovery tracking and celebration

#### **CLI Application** üíª
11 commands with Rich formatting:

```bash
# Main Commands
ai-pal status              # System health and user stats
ai-pal start "task"        # Start a new FFE momentum loop
ai-pal complete "win"      # Complete task and celebrate
ai-pal ari                 # View agency metrics
ai-pal version             # Show version info

# Personality Commands
ai-pal personality discover  # Interactive strength assessment
ai-pal personality show      # View your discovered strengths

# Social Commands
ai-pal social groups         # View your groups
ai-pal social create-group   # Create a new group

# Teaching Commands
ai-pal teach start           # Start learn-by-teaching session
ai-pal teach topics          # View available teaching topics
```

#### **REST API** üåê
23 endpoints with FastAPI:

- **System**: `/health`, `/metrics` (Prometheus)
- **Core**: `/api/chat`, `/api/users/{id}/profile`
- **FFE**: `/api/ffe/goals` (create, get, plan)
- **Social**: 7 endpoints (groups, sharing, encouragement)
- **Personality**: 6 endpoints (discovery, strengths, updates)
- **Teaching**: 3 endpoints (start, submit, evaluate)
- **OpenAPI Docs**: Auto-generated at `/docs`
- **JWT Authentication**: Bearer token framework
- **CORS Support**: Configurable origins

#### **Production Infrastructure** üè≠

**Plugin System**:
- 7 plugin types (model_provider, monitoring, gate, ffe_component, interface, integration, utility)
- Sandboxed execution (memory/CPU/time limits)
- Automatic dependency installation
- Version compatibility checking
- Dynamic discovery and loading

**CI/CD Integration**:
- Pre-commit hooks with 4-gate validation
- GitHub Actions workflows
- Automated security scanning
- Performance baseline checking
- Artifact uploads and PR comments

**Deployment**:
- Docker images (multi-stage builds)
- Kubernetes manifests (ConfigMaps, Secrets, Services)
- Prometheus + Grafana monitoring
- Structured logging (JSON, loguru)
- Health checks and readiness probes

**Testing**:
- 180 comprehensive tests (~3,900 lines)
- 80%+ test coverage
- Unit, integration, performance, security suites
- Load testing (up to 500 concurrent requests)
- Memory profiling and leak detection

## üì¶ Installation

### Windows Desktop App (Easy Install)

This method uses a PowerShell script to install all dependencies (Git, Docker Desktop, Python) and create a simple desktop application to launch AI-Pal.

**Installation:**

1. **Download the Installer Script:**
   - [Install_AI_Pal_App.ps1](scripts/Install_AI_Pal_App.ps1)
   - Important: Right-click the link and select "Save as..." to download the file. Remember where you save it (e.g., your Downloads folder).

2. **Open PowerShell as Administrator:**
   - Click the Start menu
   - Type "PowerShell"
   - Right-click on "Windows PowerShell" and select "Run as administrator"

3. **Allow the Script to Run (for this session):**
   ```powershell
   Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
   ```

4. **Navigate to the Script and Run It:**
   ```powershell
   cd $HOME\Downloads
   .\Install_AI_Pal_App.ps1
   ```

5. **Follow the On-Screen Prompts:**
   - Press Enter to continue when the script starts
   - Approve all User Account Control (UAC) prompts for installing Git, Docker, and Python
   - Enter your `OPENAI_API_KEY` and `ANTHROPIC_API_KEY` when prompted (or press Enter to skip)
   - The script will create a new "AI-Pal" shortcut on your desktop

6. **Reboot Your Computer:**
   - **CRITICAL**: Once the script shows "Part 1 Complete! REBOOT REQUIRED", you must reboot your computer. This is required for Docker installation to finalize.

**How to Start AI-Pal:**

- After rebooting, double-click the "AI-Pal" icon on your desktop
- Click the "Start AI-Pal" button
- The app will automatically start Docker and launch AI-Pal
- Once running, the interface will open at http://localhost:8000
- To stop, click "Stop AI-Pal" or close the window

---

### macOS Desktop App (Easy Install)

This method uses a Terminal script to install all dependencies (Homebrew, Git, Docker Desktop, Python) and create a simple macOS application to launch AI-Pal.

**Installation:**

1. **Download the Installer Script:**
   - [Install_AI_Pal_App.sh](scripts/Install_AI_Pal_App.sh)
   - Important: Right-click the link and select "Save as..." to download. Save it to your Downloads folder.

2. **Open the Terminal:**
   - Go to Applications > Utilities > Terminal.app
   - Or press Cmd + Space, type "Terminal", and press Enter

3. **Navigate to the Script and Run It:**
   ```bash
   cd ~/Downloads
   chmod +x Install_AI_Pal_App.sh
   ./Install_AI_Pal_App.sh
   ```

4. **Follow the On-Screen Prompts:**
   - Enter your password if prompted (for Homebrew installation)
   - Approve any Docker installation prompts
   - Enter your `OPENAI_API_KEY` and `ANTHROPIC_API_KEY` when prompted (or press Enter to skip)
   - The script will create a new "AI-Pal.app" on your Desktop

**How to Start AI-Pal:**

- Find the "AI-Pal" app on your desktop (gray AppleScript icon)
- Double-click to open it
- Click the "Start AI-Pal" button
- The app will automatically start Docker and launch AI-Pal
- Once running, the interface will open at http://localhost:8000
- To stop, click "Stop AI-Pal" or close the window

---

### Manual Installation (All Platforms)

## Windows Desktop App (Easy Install)

This method uses a PowerShell script to install all dependencies (Git, Docker Desktop, Python) and create a simple desktop application to launch AI-Pal.

### Installation

1.  **Download the Installer Script:**
    * **[Install_AI_Pal_App.ps1](https://raw.githubusercontent.com/caseymrobbins/ai-pal/refs/heads/main/Install_AI_Pal_App.ps1)**
    * **Important:** Right-click the link and select **"Save as..."** or **"Save link as..."** to download the file. Remember where you save it (e.g., your `Downloads` folder).

2.  **Open PowerShell as Administrator:**
    * Click the Start menu.
    * Type `PowerShell`.
    * Right-click on "Windows PowerShell" and select **"Run as administrator"**.

3.  **Allow the Script to Run (for this session):**
    * In the blue Administrator PowerShell window, copy and paste the following command, then press Enter. This is necessary to get around Windows' default script security policy.
    ```powershell
    Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
    ```

4.  **Navigate to the Script and Run It:**
    * First, change to the directory where you saved the file. For example, if you saved it to your `Downloads` folder:
    ```powershell
    cd $HOME\Downloads
    ```
    * (If you saved it elsewhere, use `cd C:\path\to\your\folder`)
    * Now, run the script by typing its name and pressing Enter:
    ```powershell
    .\Install_AI_Pal_App.ps1
    ```

5.  **Follow the On-Screen Prompts:**
    * Press **Enter** to continue when the script starts.
    * You **must** approve all User Account Control (UAC) prompts that appear for installing Git, Docker, and Python.
    * When prompted, enter your `OPENAI_API_KEY` and `ANTHROPIC_API_KEY`. You can press Enter to skip either key.
    * The script will clone the repository and create a new "AI-Pal" shortcut on your desktop.

6.  **Reboot Your Computer:**
    * **CRITICAL:** Once the script shows "Part 1 Complete! REBOOT REQUIRED", you **must reboot your computer**. This is a one-time step required for the Docker installation to finalize.

### How to Start AI-Pal

1.  After your computer has rebooted, double-click the new **"AI-Pal"** icon on your desktop.
2.  A small application window will open. Click the **"Start AI-Pal"** button inside this window.
3.  The app will automatically start Docker Desktop in the background (if it's not already running) and wait for it to be ready. It will then build and launch the AI-Pal containers.
4.  Once the server is running, the window will automatically load the AI-Pal interface (http://localhost:8000).
5.  To stop the application, you can either click the **"Stop AI-Pal"** button in the app window or simply close the window, which will also shut down the containers.
   
## macOS Desktop App (Easy Install)

This method uses a Terminal script to install all dependencies (Homebrew, Git, Docker Desktop, Python) and create a simple macOS application to launch AI-Pal.

### Installation

1.  **Download the Installer Script:**
    * **[Install_AI_Pal_App.sh](https://raw.githubusercontent.com/caseymrobbins/ai-pal/refs/heads/main/Install_AI_Pal_App.sh)**
    * **Important:** Right-click the link and select **"Save as..."** or **"Save link as..."** to download the `Install_AI_Pal_App.sh` file. Save it to your `Downloads` folder.

2.  **Open the Terminal:**
    * Go to `Applications` > `Utilities` > `Terminal.app`.
    * Alternatively, press `Cmd + Space`, type `Terminal`, and press Enter.

3.  **Navigate to the Script and Run It:**
    * First, change to your Downloads folder:
        ```bash
        cd ~/Downloads
        ```
    * Next, make the script executable:
        ```bash
        chmod +x Install_AI_Pal_App.sh
        ```
    * Now, run the script:
        ```bash
        ./Install_AI_Pal_App.sh
        ```

4.  **Follow the On-Screen Prompts:**
    * The script will first check for **Homebrew**. If you don't have it, it will ask for your password to install it. This is safe and necessary.
    * It will then use Homebrew to install Docker Desktop, Git, and Python. This may take several minutes.
    * Approve any prompts from Docker as it installs.
    * When prompted in the terminal, enter your `OPENAI_API_KEY` and `ANTHROPIC_API_KEY`. You can press Enter to skip either key.
    * The script will clone the repository and create a new **"AI-Pal.app"** application on your Desktop.

### How to Start AI-Pal

1.  After the script is finished, find the new **"AI-Pal"** app on your desktop (it looks like a gray AppleScript icon).
2.  Double-click the "AI-Pal" app to open it.
3.  A small application window will open. Click the **"Start AI-Pal"** button inside this window.
4.  The app will automatically start Docker Desktop in the background (if it's not already running) and wait for it to be ready. It will then build and launch the AI-Pal containers.
5.  Once the server is running, the window will automatically load the AI-Pal interface (http://localhost:8000).
6.  To stop the application, you can either click the **"Stop AI-Pal"** button in the app window or simply close the window, which will also shut down the containers.


### Manual Quick Start Guide

```bash
# Clone the repository
git clone https://github.com/caseymrobbins/ai-pal.git
cd ai-pal

# Create virtual environment
python -m venv .venv
source .venv/bin/activate  # On Windows: .venv\Scripts\activate

# Install dependencies
pip install -e .

# Initialize system (creates config directory)
mkdir -p ~/.ai-pal/data

# Set API keys (optional - local mode works without)
export ANTHROPIC_API_KEY="your-key-here"
export OPENAI_API_KEY="your-key-here"

# Run CLI
ai-pal status
```

### Hardware-Specific Setup

**For GPU users (NVIDIA):**
```bash
pip install -e . --extra-index-url https://download.pytorch.org/whl/cu118
```

**For Apple Silicon (M1/M2/M3):**
```bash
# PyTorch with Metal acceleration
pip install -e .
# MPS backend will be automatically detected
```

**For CPU-only:**
```bash
pip install -e .
# System will optimize for CPU execution
```

**For Windows:**
```bash
# Create virtual environment
python -m venv .venv
.venv\Scripts\activate

# Install dependencies
pip install -e .

# Initialize system (PowerShell)
mkdir $env:USERPROFILE\.ai-pal\data

# Set API keys (PowerShell)
$env:ANTHROPIC_API_KEY="your-key-here"
$env:OPENAI_API_KEY="your-key-here"

# Run CLI
ai-pal status
```

### Docker Installation

```bash
# Build image
docker build -t ai-pal:latest .

# Run container
docker run -it --rm \
  -e ANTHROPIC_API_KEY=$ANTHROPIC_API_KEY \
  -v ~/.ai-pal:/root/.ai-pal \
  ai-pal:latest ai-pal status

# Run API server
docker run -d -p 8000:8000 \
  -e ANTHROPIC_API_KEY=$ANTHROPIC_API_KEY \
  ai-pal:latest uvicorn ai_pal.api.main:app --host 0.0.0.0
```

### Kubernetes Deployment

```bash
# Apply manifests
kubectl apply -f k8s/configmap.yaml
kubectl apply -f k8s/secrets.yaml
kubectl apply -f k8s/deployment.yaml
kubectl apply -f k8s/service.yaml

# Check status
kubectl get pods -l app=ai-pal
kubectl logs -f deployment/ai-pal
```

## üéØ Usage

### CLI Examples

```bash
# Check system health
ai-pal status

# Start working on a goal
ai-pal start "Write a research paper on AC-AI"
# FFE will:
# 1. Ingest goal and estimate value
# 2. Use 80/20 scoping to find high-impact tasks
# 3. Create 5 atomic blocks
# 4. Reframe tasks using your signature strengths
# 5. Track momentum and provide rewards

# Complete a task
ai-pal complete "Finished literature review section"
# Celebrates your win and updates progress tapestry

# Discover your personality
ai-pal personality discover
# Interactive assessment (10 questions)
# Discovers your 8 signature strengths

# View agency metrics
ai-pal ari
# Shows your Autonomy Retention Index across 7 dimensions

# Join a support group
ai-pal social create-group "PhD Students" --description "Dissertation support"
ai-pal social groups  # View all groups

# Learn by teaching
ai-pal teach start "Explain AC-AI framework"
# Student AI asks questions, you explain, system evaluates quality
```

### REST API Examples

```bash
# Start API server
uvicorn ai_pal.api.main:app --reload

# Health check
curl http://localhost:8000/health

# Create a goal (FFE)
curl -X POST http://localhost:8000/api/ffe/goals \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-token" \
  -d '{
    "user_id": "user123",
    "description": "Learn machine learning",
    "deadline": "2025-12-31T00:00:00Z",
    "importance": 8
  }'

# Get next FFE plan
curl http://localhost:8000/api/ffe/goals/{goal_id}/plan?user_id=user123

# Start personality discovery
curl -X POST http://localhost:8000/api/personality/discover/start \
  -H "Content-Type: application/json" \
  -d '{"user_id": "user123"}'

# View interactive docs
open http://localhost:8000/docs
```

### Python API

```python
from ai_pal.core.integrated_system import IntegratedACSystem
from ai_pal.core.config import SystemConfig

# Initialize system
config = SystemConfig(
    enable_social_features=True,
    enable_personality_discovery=True,
    enable_teaching_mode=True
)
system = IntegratedACSystem(config)

# Process a chat request
response = await system.process_request(
    user_id="user123",
    message="Help me break down this goal: Write a book",
    context={}
)

# Start FFE momentum loop
goal = await system.ffe_engine.goal_ingestor.ingest_goal(
    user_id="user123",
    description="Write a book about AI safety",
    importance=9
)

plan = await system.ffe_engine.create_5_block_plan(
    user_id="user123",
    goal_id=goal.goal_id
)

# Check agency metrics
ari_summary = system.ari_monitor.get_user_summary("user123")
print(f"Current ARI score: {ari_summary['current_ari']}")

# Discover personality
session = await system.ffe_engine.personality_discovery.start_discovery_session("user123")
question = await system.ffe_engine.personality_discovery.get_next_question(session.session_id)
print(f"Question: {question.question_text}")
```

## üîß Configuration

### Environment Variables

```bash
# API Keys (optional - local mode works without)
ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=sk-...

# Model Preferences
DEFAULT_MODEL_PROVIDER=anthropic  # anthropic, openai, local
OPTIMIZATION_STRATEGY=balanced    # speed, cost, quality, balanced

# Privacy Settings
ENABLE_PII_SCRUBBING=true
DIFFERENTIAL_PRIVACY_EPSILON=1.0
DIFFERENTIAL_PRIVACY_DELTA=1e-5

# Data Storage
DATA_DIR=~/.ai-pal/data
MAX_CONTEXT_TOKENS=4096
HISTORY_RETENTION_DAYS=90

# Priority 3 Features
ENABLE_SOCIAL_FEATURES=true
ENABLE_PERSONALITY_DISCOVERY=true
ENABLE_TEACHING_MODE=true

# Monitoring
ARI_DELTA_THRESHOLD=-0.1        # Alert if agency drops below this
EDM_MAX_UNRESOLVED_DEBT=50      # Max unresolved epistemic debt
ENABLE_PROMETHEUS_METRICS=true
```

### SystemConfig (Python)

```python
from ai_pal.core.config import SystemConfig

config = SystemConfig(
    # Phase 1: Gates
    enable_gates=True,
    enable_tribunal=True,

    # Phase 2: Monitoring
    enable_ari=True,
    enable_edm=True,
    enable_self_improvement=True,

    # Phase 3: Advanced
    enable_privacy=True,
    enable_context=True,
    enable_orchestration=True,
    enable_dashboard=True,

    # Phase 5: FFE
    enable_ffe=True,

    # Priority 3: Advanced Features
    enable_social_features=True,
    enable_personality_discovery=True,
    enable_teaching_mode=True,

    # Storage
    data_dir=Path.home() / ".ai-pal" / "data"
)
```

## üìä Agency Metrics

AI-PAL tracks how it affects your autonomy with the **Autonomy Retention Index (ARI)**:

### 7 Dimensions Tracked:

1. **Decision Quality** (0-1): How well you make decisions
2. **Skill Development** (0-1): Are you learning or depending?
3. **AI Reliance** (0-1): Healthy use vs. unhealthy dependency
4. **Bottleneck Resolution** (0-1): Can you solve problems independently?
5. **User Confidence** (0-1): Do you feel capable?
6. **Engagement** (0-1): Are you actively participating?
7. **Autonomy Perception** (0-1): Do you feel in control?

**ARI Score** = Average of 7 dimensions

- **0.9-1.0**: Excellent - High autonomy
- **0.7-0.9**: Good - Healthy use
- **0.5-0.7**: Warning - Approaching dependency
- **< 0.5**: Critical - Agency floor breached (system pauses)

### View Metrics:

```bash
# CLI
ai-pal ari

# API
curl http://localhost:8000/api/ari/summary?user_id=user123

# Dashboard
ai-pal status  # Shows summary stats
```

## üõ°Ô∏è Ethics & Safety

### Circuit Breakers

System automatically pauses if:
- **Agency floor breached**: Any dimension < 0.5
- **Epistemic debt critical**: >50 unresolved high-severity debts
- **Gate violation**: Any of Four Gates fails post-audit
- **BHIR threshold**: Beyond-Horizon Impact Ratio ‚â§ 1.0

### Humanity Override

Always maintain control:

```bash
# Override an AI decision
ai-pal override --action <action_id> --reason "I disagree because..."

# Appeal a gate decision
ai-pal appeal --decision <decision_id> --justification "..."

# Emergency shutdown
ai-pal emergency-stop
```

### Audit Trail

All significant actions are logged:

```bash
# View audit log
ai-pal audit --days 7 --event-type gate_evaluation

# Export audit trail
ai-pal audit export --format json --output audit.json
```

## üß™ Testing

```bash
# Run all tests
pytest

# Run with coverage
pytest --cov=ai_pal --cov-report=html

# Run specific suites
pytest tests/unit/              # Unit tests (40 tests)
pytest tests/integration/       # Integration tests (15 tests)
pytest tests/performance/       # Performance tests (18 tests)
pytest tests/security/          # Security tests (20 tests)

# Run FFE tests
pytest tests/test_ffe_e2e.py -v

# Run gate validation
pytest tests/unit/test_gate_system.py -v

# Load testing
pytest tests/performance/test_load_and_performance.py -v
```

### Test Coverage

Current: **80%+**

- Unit tests: 87 tests covering core components
- Integration tests: 15 tests for cross-phase workflows
- Performance tests: 18 tests with latency/throughput benchmarks
- Security tests: 20 tests for attack vectors
- FFE tests: 40 tests for goal achievement system

## üó∫Ô∏è Roadmap

### ‚úÖ Phase 1-5: Core System (COMPLETE)
- [x] Gate System with Four Gates enforcement
- [x] AHO Tribunal with multi-stakeholder voting
- [x] ARI Monitor (7 dimensions tracked)
- [x] EDM Monitor (epistemic debt detection)
- [x] Self-Improvement Loop
- [x] Advanced Privacy Manager
- [x] Enhanced Context Manager
- [x] Multi-Model Orchestrator (5 models)
- [x] Agency Dashboard
- [x] Fractal Flow Engine (FFE)
- [x] All 7 FFE components operational

### ‚úÖ Phase 6: User Interfaces (COMPLETE)
- [x] Phase 6.1: Progress Tapestry, Signature Strength Interface, Epic Meaning
- [x] Phase 6.2: Prot√©g√© Pipeline (learn-by-teaching), Curiosity Compass
- [x] Phase 6.3: Social features, personality discovery, teaching mode

### ‚úÖ Production Readiness (COMPLETE)
- [x] Real model execution (Anthropic, OpenAI, Local)
- [x] AI-powered FFE components (vs templates)
- [x] Advanced ARI-FFE integration
- [x] Comprehensive testing (180 tests, 80%+ coverage)
- [x] Full Phase 1 implementation (plugins, security, CI/CD)
- [x] CLI Application (11 commands)
- [x] REST API (23 endpoints with FastAPI)
- [x] Docker & Kubernetes deployment
- [x] Observability (Prometheus, Grafana, structured logging)

### üî® Priority 3: Optional Enhancements (In Progress)
- [x] Social features (privacy-first)
- [x] Advanced personality profiling
- [x] CLI and REST API
- [ ] Dashboard enhancements (visualizations, predictive analytics)
- [ ] Performance optimization (database, Redis caching)
- [ ] Web UI (React dashboard)

### üìÖ Future (Planned)
- [ ] Mobile applications (iOS, Android)
- [ ] Federated learning across instances
- [ ] Advanced dream module capabilities
- [ ] Community plugin marketplace
- [ ] Multi-language support
- [ ] Voice interface

## ü§ù Contributing

We welcome contributions! See [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.

### Development Setup

```bash
# Install development dependencies
pip install -e ".[dev]"

# Install pre-commit hooks
pre-commit install

# Run linting
ruff check src/
black --check src/

# Run type checking
mypy src/ai_pal/

# Run tests before committing
pytest --cov=ai_pal
```

### Key Areas Needing Help
- Dashboard visualizations (Plotly, D3.js)
- Performance optimization (database migrations)
- Additional LLM provider integrations
- Mobile app development
- Documentation improvements
- Translation to other languages

## üìö Documentation

Full documentation available in [docs/](docs/):

- [Architecture Guide](docs/ARCHITECTURE.md) - System design and components
- [FFE Developer Guide](docs/FFE_DEVELOPER_GUIDE.md) - Fractal Flow Engine internals
- [AC-AI Framework](docs/AC_AI_FRAMEWORK.md) - Agency Calculus implementation
- [API Reference](docs/API_REFERENCE.md) - Complete API documentation
- [Privacy & Security](docs/PRIVACY_SECURITY.md) - Security architecture
- [Deployment Guide](docs/DEPLOYMENT.md) - Production deployment
- [Plugin Development](docs/PLUGIN_DEVELOPMENT.md) - Writing plugins

## üìÑ License

MIT License - see [LICENSE](LICENSE) for details.

## üôè Acknowledgments

- **Agency Calculus for AI (AC-AI)** framework by Casey Robbins
- **Constitutional AI** principles from Anthropic
- **Fractal Flow Design** inspired by Flow theory (Csikszentmihalyi) and Atomic Habits (Clear)
- **Privacy Technology**: Microsoft Presidio, differential privacy
- **LLM Support**: Anthropic Claude, OpenAI GPT, Ollama
- **Python Ecosystem**: FastAPI, Typer, Rich, Pydantic, pytest

## üí¨ Support

- **Issues**: [GitHub Issues](https://github.com/caseymrobbins/ai-pal/issues)
- **Discussions**: [GitHub Discussions](https://github.com/caseymrobbins/ai-pal/discussions)
- **Security**: Report vulnerabilities to security@aipal.dev
- **Documentation**: [Read the Docs](https://ai-pal.readthedocs.io)

## üéØ Current Status

**Version**: 1.0.0-beta
**Stability**: Production Ready (98% complete)
**Test Coverage**: 80%+
**Total Code**: 70+ files, ~20,000+ lines
**Tests**: 180 comprehensive tests

---

**Built with ‚ù§Ô∏è for human agency, autonomy, and flourishing**

*"The best AI is the one that makes itself less necessary over time."*
