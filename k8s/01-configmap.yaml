apiVersion: v1
kind: ConfigMap
metadata:
  name: ai-pal-config
  namespace: ai-pal
data:
  LOG_LEVEL: "info"
  PYTHONUNBUFFERED: "1"
  PYTHONDONTWRITEBYTECODE: "1"
  # Database configuration (host will be postgres service in cluster)
  DB_HOST: "postgres"
  DB_PORT: "5432"
  DB_NAME: "aipal"
  # Redis configuration (host will be redis service in cluster)
  REDIS_HOST: "redis"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  # Celery configuration
  CELERY_BROKER_DB: "1"
  CELERY_RESULT_DB: "2"
  # API configuration
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  API_WORKERS: "4"
  # Flower configuration
  FLOWER_PORT: "5555"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-config
  namespace: ai-pal
data:
  POSTGRES_INITDB_ARGS: "-c shared_buffers=256MB -c max_connections=200"
  pgbench.sql: |
    -- PostgreSQL health check query
    SELECT 1;
